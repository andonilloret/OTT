// Generated by CoffeeScript 1.9.3
(function() {
  var OTTModule;

  OTTModule = angular.module('OTT', []);

  OTTModule.controller('mediaCtrl', [
    '$scope', '$http', function($scope, $http) {
      var randCategory, video;
      $scope.categories = categories.categories;
      randCategory = categories.categories[Math.floor(Math.random() * categories.categories.length)];
      video = randCategory.videos[Math.floor(Math.random() * randCategory.videos.length)];
      getPlayer(video.id);
      $scope.videoTitle = video.title;
      return $scope.loadImage = function(video) {
        getPlayer(video.video.id);
        return $scope.videoTitle = video.video.title;
      };
    }
  ]);

  OTTModule.controller('ctrlLive', [
    '$scope', function($scope) {
      var endDate, event, now, startDate;
      $scope.schedule = schedule;
      event = schedule[0];
      startDate = new Date(event.date_start);
      endDate = new Date(event.date_end);
      return now = new Date;
    }
  ]);

  OTTModule.controller('ctrlAccount', [
    '$scope', '$http', function($scope, $http) {
      return $scope.submit = function() {
        var updateCustomer, validation;
        $scope.submitForm = true;
        $scope.submitOk = false;
        $scope.submitError = false;
        updateCustomer = {
          first_name: $scope.first_name,
          last_name: $scope.last_name,
          email: $scope.email,
          metadata: {
            birth_date: $('#txtDate').val()
          }
        };
        validation = true;
        validation = $scope.first_name !== '';
        validation = validation && $scope.last_name !== '';
        validation = validation && $scope.email !== '';
        validation = validation && $scope.email === $scope.confirm_email;
        validation = validation && $('#txtDate').val() !== '';
        if (validation) {
          return $http.put('/customer', updateCustomer).then((function(response) {
            $scope.submitForm = false;
            $scope.submitError = false;
            return $scope.submitOk = true;
          }), function(response) {});
        } else {
          $scope.submitForm = false;
          $scope.submitOk = false;
          $scope.submitError = true;
          return $scope.responseError = 'Revise los campos.';
        }
      };
    }
  ]);

  $(document).ready(function() {
    $('.owl-carousel').owlCarousel({
      items: 4,
      loop: true,
      dots: true
    });
  });

}).call(this);
